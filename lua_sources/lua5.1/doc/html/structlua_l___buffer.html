<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>lua: luaL_Buffer Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<h1>luaL_Buffer Struct Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="luaL_Buffer" -->
<p><code>#include &quot;<a class="el" href="lauxlib_8h_source.html">lauxlib.h</a>&quot;</code></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlua_l___buffer.html#aaa1ebe818ec1c763a776cc580551f3e6">p</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlua_l___buffer.html#a6c7f440bf2fb555abdc789a41c6acf44">lvl</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="lua_8h.html#a28186297f2e9f2de0652504633de8fb3">lua_State</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlua_l___buffer.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlua_l___buffer.html#af889929f8741570a4e742afc2df38442">buffer</a> [LUAL_BUFFERSIZE]</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p><a class="el" href="structlua_l___buffer.html">luaL_Buffer</a></p>
<p>typedef struct <a class="el" href="structlua_l___buffer.html">luaL_Buffer</a> <a class="el" href="structlua_l___buffer.html">luaL_Buffer</a>;</p>
<p>Type for a string buffer.</p>
<p>A string buffer allows C code to build Lua strings piecemeal. Its pattern of use is as follows:</p>
<p>First you declare a variable b of type <a class="el" href="structlua_l___buffer.html">luaL_Buffer</a>.</p>
<p>Then you initialize it with a call luaL_buffinit(L, &amp;b).</p>
<p>Then you add string pieces to the buffer calling any of the luaL_add* functions.</p>
<p>You finish by calling luaL_pushresult(&amp;b). This call leaves the final string on the top of the stack.</p>
<p>During its normal operation, a string buffer uses a variable number of stack slots. So, while using a buffer, you cannot assume that you know where the top of the stack is. You can use the stack between successive calls to buffer operations as long as that use is balanced; that is, when you call a buffer operation, the stack is at the same level it was immediately after the previous buffer operation. (The only exception to this rule is luaL_addvalue.) After calling luaL_pushresult the stack is back to its level when the buffer was initialized, plus the final string on its top.</p>
<p>字符串缓冲器类型。</p>
<p>字符串缓冲器允许C代码逐段地构建Lua字符串。其使用模式如下：</p>
<p>首先声明luaL_Buffer类型的变量b。</p>
<p>接着调用luaL_buffinit(L, &amp;b)初始化它。</p>
<p>然后调用luaL_add*函数把字符串片断添加到缓冲器。</p>
<p>通过调用luaL_pushresult(&amp;b)结束。该调用把最终的字符串放在栈顶。</p>
<p>在字符串缓冲器的常规操作期间，它占用的栈槽数量不固定。所以，使用缓冲器时，你不能假定知道栈顶在哪儿。只要用法是对称的，你就能在连续的对缓冲器操作的调用之间使用栈；就是说，当你调用缓冲器操作时，栈处于前一个缓冲器操作后立刻得到的水平。（该规则的唯一例外是luaL_addvalue。）调用luaL_pushresult之后，栈回到缓冲器被初始化时的水平，加上栈顶的最终字符串。 </p>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="af889929f8741570a4e742afc2df38442"></a><!-- doxytag: member="luaL_Buffer::buffer" ref="af889929f8741570a4e742afc2df38442" args="[LUAL_BUFFERSIZE]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="structlua_l___buffer.html#af889929f8741570a4e742afc2df38442">buffer</a>[LUAL_BUFFERSIZE]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a62f94dfc0036bec0c14106c2f15caf3e"></a><!-- doxytag: member="luaL_Buffer::L" ref="a62f94dfc0036bec0c14106c2f15caf3e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="lua_8h.html#a28186297f2e9f2de0652504633de8fb3">lua_State</a>* <a class="el" href="structlua_l___buffer.html#a62f94dfc0036bec0c14106c2f15caf3e">L</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6c7f440bf2fb555abdc789a41c6acf44"></a><!-- doxytag: member="luaL_Buffer::lvl" ref="a6c7f440bf2fb555abdc789a41c6acf44" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structlua_l___buffer.html#a6c7f440bf2fb555abdc789a41c6acf44">lvl</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aaa1ebe818ec1c763a776cc580551f3e6"></a><!-- doxytag: member="luaL_Buffer::p" ref="aaa1ebe818ec1c763a776cc580551f3e6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="structlua_l___buffer.html#aaa1ebe818ec1c763a776cc580551f3e6">p</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="lauxlib_8h_source.html">lauxlib.h</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Mon Jun 6 2011 16:02:28 for lua by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
